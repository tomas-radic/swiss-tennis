<div class="row">
  <div class="col">
    <h1 class="float-left"><%= player_name_by_consent(@player, current_user) %></h1>
    <div class="float-right">
      <% if user_signed_in? %>
        <%= link_to 'Upraviť', edit_player_path(@player), class: 'btn btn-success my-1' %>
      <% end %>
      <%= link_to 'Všetci hráči', enrollments_path, class: 'btn btn-outline-success my-1' %>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-12 col-md-6">
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <p class="lead text-center">Tel.:<span class="px-2"><%= @player.phone.present? && (user_signed_in? || @player.consent_given?) ? link_to(@player.phone, "tel:#{@player.phone}") : maybe_missing(@player.phone) %></span></p>
        <p class="lead text-center">Email:<span class="px-2"><%= @player.email.present? && (user_signed_in? || @player.consent_given?) ? link_to(@player.email, "mailto:#{@player.email}") : maybe_missing(@player.email) %></span></p>
      </div>
    </div>
  </div>
  <div class="col-sm-12 col-md-6">
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <p class="lead text-center">Rok nar.:<span class="px-2"><%= maybe_missing(@player.birth_year) %></span></p>
        <p class="lead text-center"><%= @player.category.name %></p>
      </div>
    </div>
  </div>
</div>
<% if @success_of_play.values.select { |v| !v.blank? }.any? %>
  <hr>
  <div class="row">
    <div class="col">
      <p class="lead text-center">
        Úspešnosť hry
        <span data-toggle="tooltip" data-placement="top" title="Pomer vyhratých gemov ku všetkým odohraným">
          <%= fa_icon 'question-circle' %>
        </span>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-md-6">
      <div class="card mb-3 <%= success_of_play_color_class(@success_of_play[:season]) %>">
        <div class="card-header"><%= "V sezóne #{selected_season.name}" %></div>
        <div class="card-body">
          <h5 class="card-title"><%= @success_of_play[:season] ? "#{@success_of_play[:season]}%" : '(žiadne zápasy)' %></h5>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card mb-3 <%= success_of_play_color_class(@success_of_play[:history]) %>">
        <div class="card-header">V histórii súťaže</div>
        <div class="card-body">
          <h5 class="card-title"><%= @success_of_play[:history] ? "#{@success_of_play[:history]}%" : '(žiadne zápasy)' %></h5>
        </div>
      </div>
    </div>
  </div>
<% end %>
<hr>
<div class="row">
  <div class="col">
    <p class="lead text-center">
      <%= "Zápasy sezóny #{selected_season.name}" %>
    </p>
    <%= render 'matches/table', matches: PlayerSeasonMatchesQuery.call(player: @player, season: selected_season)
        .includes(:round, :winner, player1: :rankings, player2: :rankings) %>
  </div>
</div>
<div class="row">
  <div class="col">
    <p>
      Prihlásenie do sezóny • <%= I18n.localize(
                                      selected_season.enrollments.find_by(player: @player).created_at,
                                      format: :date_month_year) %>
    </p>
  </div>
</div>
