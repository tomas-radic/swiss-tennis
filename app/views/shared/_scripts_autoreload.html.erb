<script type="text/javascript">
  var timer = null;
  var pageLoadedAt = $.now();

  $(document).on('turbolinks:load', function() {

    // Consider page reload after window focus and after page stopped scrolling
    window.addEventListener("focus", considerPageReload);
    $(window).scroll(function() {
      if (timer !== null) {
        clearTimeout(timer);
      }

      timer = setTimeout(considerPageReload, 300);
    });
  });

  function considerPageReload() {
    if ($.now() - pageLoadedAt > 7200000) { // two hours
      location.reload();
    }

    timer = null;
  }
</script>
